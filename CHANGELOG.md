# Changelog

## v0.8.1

Instead of needing the full file path, Chroma can now automatically find files in expected directories (i.e. chroma inbuilt themes directory and `~/.config/chroma/themes`).

### Key changes

- Renamed the `imagemagick.py` generator to `magick.py`
- Chroma can find the theme name automatically by providing the file name only

### Additions

- Added `chroma.utils.paths.find_theme_from_name`. This finds theme paths from the theme name

### Changes

- Renamed `imagemagick.py` to `magick.py`
- Renamed `chroma.utils.paths.chroma_themes_dir` to `chroma_builtins_dir`
- Updated the chroma version of `chroma.themes.tokyodark` from `0.7.0` to `0.8.1`

### Removals

- Removed `imagemagick` alias for the `magick` generator

## v0.8.0

Massive changes to the internal structure of the code. Themers would need to make a lot of changes to ensure their integration remains compatible. Please note that during development (before major version 1), the API will fluctuate a lot.

### Key changes

- Renamed `handlers` to `integrations`. The code otherwise works the same. Make sure to update your integrations to the new names for the classes. This is a breaking change.
- Renamed `backends` to `generators` for color generators.
- Changed `chroma.colors` from a file to a module. The old colors file is now deprecated under `chroma._colors`. Usage guide can be found in the README.
- The new API has removed in-place modifying of variables. Now, all methods will return a copy with the modified values, making the usage more pythonic.
- `chroma.utils` has now been split into its own module. You need to use the relevant file to import the utility function now.
- Added CI for linting and basic testing

### Additions

- Added newer and more robust `chroma.colors` module.
- Added `exceptions.py` file to provide application-specific exceptions
- Added linting and testing to CI
- Added state to the runtime, so variables can be set before running the lua theming
- Added `--ignore-generated` to ignore the generated colors for one session instead of removing them completely

### Changes

- Deprecated old `chroma.colors` module. It now exists under `chroma._colors` and will be removed soon. Don't use it.
- Changed `chroma.utils` from a file to a module. Check the files and import relevant functions as needed.
- Changed `handlers` to `integrations`. This affects the directory names and class names.
- If `output_path` is `None` for any generator, it's output is returned as a dict instead
- `chroma.theme.load` can now optionally take raw lua instead of a file path for theme data to parse

### Removals

- Removed in-place changing. All operations return the modified object.
- Removed `estimate_missing` parameter from `magick` generator.
- Removed `iterations` parameter from `magick` generator.
- Removed `--estimate` flag from the program. This is the default behaviour.
- Removed `--iterations` flag from the program. This is now redundant.
- Removed `chroma.logger.Logger.fatal()`. Logger should not exit the application.

## v0.7.0

Did a lot of work to get autogenerator working.

### Key changes

- `chroma generate` is no longer experimental.
- Added `chroma.builtins.lib` for easier time theming
- Added `chroma remove` command to remove autogenerated palette, returning to default colors

### Additions

- Added `chroma remove` command to remove autogenerated palette
- Added `chroma.builtins.lib` for Chroma's standard library functions
- Added `chroma.builtins.lib.generate_or()` to either use the generated colors if they exist, otherwise the theme colors.
- Added registry for backends

### Changes

- `chroma generate` is no longer experimental
- Split out the generator into backend and generator
- `chroma generate` is using HSL to detect the color-ness of a color, and using that to generate theme colorscheme.

### Removals

- Removed normalizing and denormalizing HSL colors as they work differently to RGB normalization and denormalization

## v0.6.0

This update introduces significant changes to the luascape, changing the requirement of themes and the general layout of the lua code altogether.

Similarly significant changes were also introduced to the pythonscape, mostly updating the API the handlers must now use.

### Key changes

- User-defined handlers are no longer experimental. Create handlers in `~/.config/chroma/handlers`. Check the [README](https://github.com/aryanjassal/chroma?tab=readme-ov-file#custom-handlers) for instructions on writing a custom handler.
- Each theme must return a table with all the available colors. The colors must be a part of the theme itself.

### Additions

- Added types to lua default theme for an easier time writing themes.
- Added a bunch of documentation in lualands.
- Instead of naming the handler to the intended capture group, now a registry can hold that information. Add this line to export a registry field: `def registry(): return { 'type': HandlerClass }`. Note that the handler class constructor is returned. Chroma will construct the handler with the required parameters and call the `apply()` function.

### Changes

- Moved `python` from an export of the default theme to it's own module under `chroma.builtins.python`.
- Tuples can no longer be returned from themes. Instead, return only the theme with an added colors group. This does not and can not have a handler associated with it.
- `Color.to(fmt)` has been removed in favor of `Color.as_format(fmt)` and `Color.as_rgb()`, `Color.as_hsl()`, `Color.as_hex()`, `Color.as_hexval()`.
- `Color.blend` and similar methods which alter colors now return a `Color` object, allowing to chain operations like `Color.as_rgb().normalize().darken(0.5).as_hex()`.
- Instead of writing a handler with a single `apply()` definition with the required parameters, now it is required to extend the `Handler` class and override the default `apply()` handler.
- Documented the `perform_backup` option for raw handlers and renamed it to `force`.

### Removals

- `Color.convert(fmt)` has been removed as regular commands return full colors by default.
